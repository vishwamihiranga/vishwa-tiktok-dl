<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Video Downloader - Safe & Private</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></script>
     <link rel="icon" href="https://www.facebook.com/favicon.ico" type="image/x-icon">
    <style>
        :root {
            --primary-color: #1877f2;
            --secondary-color: #42b72a;
            --bg-color: #f0f2f5;
            --text-color: #1c1e21;
            --danger-color: #ff4444;
            --warning-color: #ffbb33;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .header p {
            color: #65676b;
            font-size: 1.1rem;
        }

        .download-box {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .url-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        input[type="url"] {
            flex: 1;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input[type="url"]:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #166fe5;
        }

        .result-container {
            display: none;
            margin-top: 2rem;
        }

        .video-preview {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .download-option {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .download-option h3 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 1rem 0;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        .privacy-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-top: 3rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .privacy-section h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .privacy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .privacy-item {
            padding: 1rem;
            border-left: 4px solid var(--primary-color);
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
        }

      .video-info {
          background: #f8f9fa;
          padding: 1.5rem;
          border-radius: 12px;
          margin-top: 1rem;
          display: none;
          box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      }

      .video-info h3 {
          color: var(--primary-color);
          margin-bottom: 1.5rem;
          text-align: center;
          font-size: 1.3rem;
      }

      .video-info-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 1rem;
      }

      .info-item {
          background: white;
          padding: 1rem;
          border-radius: 8px;
          text-align: center;
          transition: transform 0.2s ease;
          border: 1px solid #eee;
      }

      .info-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }

      .info-item strong {
          display: block;
          margin-bottom: 0.5rem;
          color: var(--primary-color);
          font-size: 0.95rem;
      }

      .info-item p {
          color: var(--text-color);
          font-size: 0.9rem;
      }

      @media (max-width: 768px) {
          .video-info-grid {
              grid-template-columns: repeat(2, 1fr);
          }
      }

      @media (max-width: 480px) {
          .video-info-grid {
              grid-template-columns: 1fr;
          }
      }

        .info-item {
            background: white;
            padding: 0.5rem;
            border-radius: 4px;
            text-align: center;
        }

        .tutorial {
            margin-top: 3rem;
            text-align: center;
        }

        .tutorial-steps {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .step-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 250px;
            max-width: 300px;
        }

        .step-number {
            background: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }

        .footer {
            margin-top: 3rem;
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 12px;
        }

        .batch-download {
            margin-top: 2rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }

        .batch-urls {
            width: 100%;
            min-height: 100px;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .url-input {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Facebook Video Downloader</h1>
            <p>Download Facebook videos safely and privately</p>
        </header>

        <main>
            <div class="download-box">
                <div class="url-input">
                    <input type="url" id="videoUrl" placeholder="Paste Facebook video URL here..." required>
                    <button onclick="downloadVideo()">Download</button>
                </div>

              <div class="video-info" id="videoInfo">
                  <h3>üìΩÔ∏è Video Information</h3>
                  <div class="video-info-grid">
                      <div class="info-item">
                          <strong>‚è±Ô∏è Duration</strong>
                          <p id="videoDuration">--:--</p>
                      </div>
                      <div class="info-item">
                          <strong>üéØ Quality</strong>
                          <p id="videoQuality">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üíæ File Size</strong>
                          <p id="videoSize">-- MB</p>
                      </div>
                      <div class="info-item">
                          <strong>üìÖ Upload Date</strong>
                          <p id="uploadDate">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üëÅÔ∏è Views</strong>
                          <p id="viewCount">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üëç Likes</strong>
                          <p id="likeCount">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üí´ Resolution</strong>
                          <p id="resolution">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üîä Audio Quality</strong>
                          <p id="audioQuality">--</p>
                      </div>
                      <div class="info-item">
                          <strong>üë§ Author</strong>
                          <p id="author">--</p>
                      </div>
                  </div>
              </div>

                <div class="loading">
                    <div class="spinner"></div>
                    <p>Processing your video...</p>
                </div>

                <div class="result-container" id="resultContainer">
                    <div class="video-preview">
                        <h3>Video Preview</h3>
                        <video id="videoPreview" controls width="100%" style="margin-top: 1rem;">
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    <div class="download-options">
                        <div class="download-option">
                            <h3>HD Quality</h3>
                            <p>1080p resolution</p>
                            <button onclick="downloadHD()" style="background-color: var(--secondary-color); margin-top: 1rem;">
                                Download HD
                            </button>
                        </div>

                        <div class="download-option">
                            <h3>Normal Quality</h3>
                            <p>720p resolution</p>
                            <button onclick="downloadNormal()" style="margin-top: 1rem;">
                                Download Normal
                            </button>
                        </div>

                        <div class="download-option">
                            <h3>Audio Only</h3>
                            <p>MP3 format</p>
                            <button onclick="downloadAudio()" style="background-color: #e4405f; margin-top: 1rem;">
                                Download Audio
                            </button>
                        </div>
                    </div>
                </div>

                <div class="batch-download" id="batchDownload">
                    <h3>Batch Download</h3>
                    <p>Enter multiple URLs (one per line)</p>
                    <textarea class="batch-urls" id="batchUrls" placeholder="Enter Facebook video URLs..."></textarea>
                    <button onclick="processBatchDownload()">Process Batch</button>
                </div>
            </div>
          <div class="tutorial">
              <h2>How to Download Facebook Videos</h2>
              <div class="tutorial-steps">
                  <div class="step-card">
                      <div class="step-number">1</div>
                      <h3>Copy Video URL</h3>
                      <p>Find the video on Facebook and copy its URL from the address bar</p>
                  </div>
                  <div class="step-card">
                      <div class="step-number">2</div>
                      <h3>Paste URL</h3>
                      <p>Paste the URL into the input field above</p>
                  </div>
                  <div class="step-card">
                      <div class="step-number">3</div>
                      <h3>Download</h3>
                      <p>Choose your preferred quality and download the video</p>
                  </div>
              </div>
          </div>
            <div class="privacy-section">
                <h2>Privacy & Security</h2>
                <p>Your privacy and security are our top priorities. Here's how we protect your data:</p>

                <div class="privacy-grid">
                    <div class="privacy-item">
                        <h3>üîí No Data Storage</h3>
                        <p>We don't store any of your videos or personal information on our servers.</p>
                    </div>
                    <div class="privacy-item">
                        <h3>üõ°Ô∏è Secure Downloads</h3>
                        <p>All downloads are processed through secure HTTPS connections.</p>
                    </div>
                    <div class="privacy-item">
                        <h3>üîê Anonymous Usage</h3>
                        <p>No account or registration required. Use the service completely anonymously.</p>
                    </div>
                    <div class="privacy-item">
                        <h3>üìú No Logs</h3>
                        <p>We don't keep logs of download history or user activities.</p>
                    </div>
                </div>
            </div>

            <div class="features">
                <div class="feature-card">
                    <i>üé•</i>
                    <h3>Multiple Qualities</h3>
                    <p>Download in HD, SD, or audio-only format</p>
                </div>

                <div class="feature-card">
                    <i>‚ö°</i>
                    <h3>Fast Download</h3>
                    <p>Quick processing and download speeds</p>
                </div>

                <div class="feature-card">
                    <i>üîÑ</i>
                    <h3>Batch Download</h3>
                    <p>Download multiple videos at once</p>
                </div>

                <div class="feature-card">
                    <i>üì±</i>
                    <h3>Mobile Friendly</h3>
                    <p>Works perfectly on all devices</p>
                </div>

                <div class="feature-card">
                    <i>üéØ</i>
                    <h3>No Watermark</h3>
                    <p>Download videos without watermarks</p>
                </div>

                <div class="feature-card">
                    <i>üíæ</i>
                    <h3>Format Options</h3>
                    <p>Choose from multiple formats</p>
                </div>
            </div>

        
            <footer class="footer">
                <p>‚ö° Fast, Secure, and Private Facebook Video Downloads</p>
                <p style="margin-top: 1rem; color: #65676b;">By using this service, you agree to our Terms of Service and Privacy Policy</p>
              <p style="margin-top: 1rem; color: #022311;">Created By Vishwa Mihiranga</p>
            </footer>
        </main>
    </div>

    <script>
      // Store video data and download queue
      let videoData = null;
      let downloadQueue = [];
      let isProcessing = false;

      // Utility function to format file size
      function formatFileSize(bytes) {
          if (!bytes) return '0 Bytes';
          const k = 1024;
          const sizes = ['Bytes', 'KB', 'MB', 'GB'];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }

      // Utility function to format duration
      function formatDuration(seconds) {
          const minutes = Math.floor(seconds / 60);
          const remainingSeconds = Math.floor(seconds % 60);
          return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
      }

      // Function to validate Facebook URL
      function isValidFacebookUrl(url) {
          const fbRegex = /^(https?:\/\/)?(www\.)?(facebook|fb)\.com\/.*$/i;
          return fbRegex.test(url);
      }

      // Main download function
      async function downloadVideo() {
          const urlInput = document.getElementById('videoUrl');
          const loadingDiv = document.querySelector('.loading');
          const resultContainer = document.getElementById('resultContainer');
          const videoInfo = document.getElementById('videoInfo');

          if (!urlInput.value) {
              showNotification('Please enter a Facebook video URL', 'error');
              return;
          }

          if (!isValidFacebookUrl(urlInput.value)) {
              showNotification('Please enter a valid Facebook video URL', 'error');
              return;
          }

          try {
              loadingDiv.style.display = 'block';
              resultContainer.style.display = 'none';
              videoInfo.style.display = 'none';

              const apiUrl = `https://api.fgmods.xyz/api/downloader/fbdl?url=${encodeURIComponent(urlInput.value)}&apikey=Cu5RXZLd`;
              const response = await fetch(apiUrl);

              if (!response.ok) {
                  throw new Error('API request failed');
              }

              const data = await response.json();

              if (data.result) {
                  videoData = data.result;
                  await analyzeVideo();
                  displayResult();
                  showNotification('Video processed successfully!', 'success');
              } else {
                  throw new Error('Failed to fetch video data');
              }
          } catch (error) {
              showNotification('Error downloading video. Please check the URL and try again.', 'error');
              console.error('Download error:', error);
          } finally {
              loadingDiv.style.display = 'none';
          }
      }

      // Analyze video metadata
      async function analyzeVideo() {
          if (!videoData?.Normal_video) return;

          try {
              // Create temporary video element to get duration
              const video = document.createElement('video');
              video.src = videoData.Normal_video;

              await new Promise((resolve, reject) => {
                  video.addEventListener('loadedmetadata', () => {
                      document.getElementById('videoDuration').textContent = formatDuration(video.duration);
                      document.getElementById('videoQuality').textContent = videoData.HD ? '1080p Available' : '720p';
                      document.getElementById('resolution').textContent = videoData.HD ? '1920x1080' : '1280x720';
                      document.getElementById('audioQuality').textContent = '128 kbps';
                      resolve();
                  });
                  video.addEventListener('error', reject);
              });

              // Estimate file size from headers
              const response = await fetch(videoData.Normal_video, { method: 'HEAD' });
              const size = response.headers.get('content-length');
              document.getElementById('videoSize').textContent = formatFileSize(size);

              // Set mock data for demonstration (replace with actual API data when available)
              const currentDate = new Date().toLocaleDateString();
              document.getElementById('uploadDate').textContent = currentDate;
              document.getElementById('viewCount').textContent = formatNumber(Math.floor(Math.random() * 1000000));
              document.getElementById('likeCount').textContent = formatNumber(Math.floor(Math.random() * 50000));
              document.getElementById('author').textContent = 'Facebook User';

              document.getElementById('videoInfo').style.display = 'block';
          } catch (error) {
              console.error('Error analyzing video:', error);
          }
      }

      // Utility function to format large numbers
      function formatNumber(num) {
          if (num >= 1000000) {
              return (num / 1000000).toFixed(1) + 'M';
          } else if (num >= 1000) {
              return (num / 1000).toFixed(1) + 'K';
          }
          return num.toString();
      }

      // Display results
      function displayResult() {
          const resultContainer = document.getElementById('resultContainer');
          const videoPreview = document.getElementById('videoPreview');

          videoPreview.src = videoData.Normal_video;
          resultContainer.style.display = 'block';

          // Save to download history
          saveToHistory({
              url: videoData.Normal_video,
              timestamp: new Date().toISOString(),
              quality: videoData.HD ? 'HD' : 'Normal'
          });
      }

      // Download functions for different qualities
      function downloadHD() {
          if (videoData?.HD) {
              initiateDownload(videoData.HD, 'HD');
          } else {
              showNotification('HD quality not available for this video', 'warning');
          }
      }

      function downloadNormal() {
          if (videoData?.Normal_video) {
              initiateDownload(videoData.Normal_video, 'Normal');
          } else {
              showNotification('Normal quality not available', 'error');
          }
      }

      function downloadAudio() {
          if (videoData?.audio) {
              initiateDownload(videoData.audio, 'Audio');
          } else {
              showNotification('Audio extraction not available', 'error');
          }
      }

      // Initiate download with progress tracking
      async function initiateDownload(url, quality) {
          try {
              showNotification(`Starting ${quality} download...`, 'info');

              const response = await fetch(url);
              const reader = response.body.getReader();
              const contentLength = +response.headers.get('Content-Length');

              let receivedLength = 0;
              const chunks = [];

              while(true) {
                  const {done, value} = await reader.read();

                  if (done) break;

                  chunks.push(value);
                  receivedLength += value.length;

                  // Update progress
                  const progress = (receivedLength / contentLength) * 100;
                  updateDownloadProgress(progress);
              }

              // Combine chunks and download
              const blob = new Blob(chunks);
              const downloadUrl = window.URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = downloadUrl;
              a.download = `facebook-video-${quality}-${Date.now()}.mp4`;
              document.body.appendChild(a);
              a.click();
              window.URL.revokeObjectURL(downloadUrl);
              document.body.removeChild(a);

              showNotification(`${quality} download completed!`, 'success');
          } catch (error) {
              showNotification(`Error downloading ${quality} version`, 'error');
              console.error('Download error:', error);
          }
      }

      // Batch download processing
      async function processBatchDownload() {
          const batchUrls = document.getElementById('batchUrls').value
              .split('\n')
              .filter(url => url.trim() && isValidFacebookUrl(url.trim()));

          if (batchUrls.length === 0) {
              showNotification('Please enter valid Facebook video URLs', 'error');
              return;
          }

          downloadQueue = [...batchUrls];
          showNotification(`Processing ${downloadQueue.length} videos...`, 'info');

          if (!isProcessing) {
              processNextInQueue();
          }
      }

      // Process queue
      async function processNextInQueue() {
          if (downloadQueue.length === 0) {
              isProcessing = false;
              showNotification('Batch processing completed!', 'success');
              return;
          }

          isProcessing = true;
          const url = downloadQueue.shift();

          try {
              document.getElementById('videoUrl').value = url;
              await downloadVideo();
              await new Promise(resolve => setTimeout(resolve, 1000)); // Delay between downloads
              processNextInQueue();
          } catch (error) {
              console.error('Error processing queue:', error);
              processNextInQueue(); // Continue with next URL even if current fails
          }
      }

      // Download history management
      function saveToHistory(download) {
          const history = JSON.parse(localStorage.getItem('downloadHistory') || '[]');
          history.unshift(download);
          if (history.length > 50) history.pop(); // Keep last 50 downloads
          localStorage.setItem('downloadHistory', JSON.stringify(history));
      }

      function getDownloadHistory() {
          return JSON.parse(localStorage.getItem('downloadHistory') || '[]');
      }

      // Notification system
      function showNotification(message, type = 'info') {
          // Check if notification container exists
          let container = document.getElementById('notificationContainer');
          if (!container) {
              container = document.createElement('div');
              container.id = 'notificationContainer';
              container.style.cssText = `
                  position: fixed;
                  top: 20px;
                  right: 20px;
                  z-index: 1000;
              `;
              document.body.appendChild(container);
          }

          const notification = document.createElement('div');
          notification.className = `notification ${type}`;
          notification.textContent = message;
          notification.style.cssText = `
              padding: 12px 24px;
              margin-bottom: 10px;
              border-radius: 4px;
              background-color: white;
              box-shadow: 0 2px 5px rgba(0,0,0,0.2);
              animation: slideIn 0.3s ease-out;
          `;

          container.appendChild(notification);

          // Remove notification after 3 seconds
          setTimeout(() => {
              notification.style.animation = 'slideOut 0.3s ease-out';
              setTimeout(() => container.removeChild(notification), 300);
          }, 3000);
      }

      // Progress bar updates
      function updateDownloadProgress(progress) {
          // Implementation depends on your UI
          console.log(`Download progress: ${Math.round(progress)}%`);
      }

      // Event listeners
      document.addEventListener('DOMContentLoaded', () => {
          // Handle paste events
          document.getElementById('videoUrl').addEventListener('paste', (e) => {
              setTimeout(downloadVideo, 100); // Auto-download on paste
          });

          // Handle drag and drop
          document.body.addEventListener('dragover', (e) => {
              e.preventDefault();
              e.stopPropagation();
          });

          document.body.addEventListener('drop', (e) => {
              e.preventDefault();
              e.stopPropagation();

              const text = e.dataTransfer.getData('text');
              if (isValidFacebookUrl(text)) {
                  document.getElementById('videoUrl').value = text;
                  downloadVideo();
              }
          });
      });
    </script>
</body>
</html>
